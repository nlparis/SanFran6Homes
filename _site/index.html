<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Home | SanFran6Homes</title>
<meta property="og:title" content="Home" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There are at least 6 homes you may stay in in San Francisco (for a few nights, probably.) This web app will help you find one (probably.)" />
<meta property="og:description" content="There are at least 6 homes you may stay in in San Francisco (for a few nights, probably.) This web app will help you find one (probably.)" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="SanFran6Homes" />
<script type="application/ld+json">
{"name":"SanFran6Homes","description":"There are at least 6 homes you may stay in in San Francisco (for a few nights, probably.) This web app will help you find one (probably.)","author":null,"@type":"WebSite","url":"http://localhost:4000/","publisher":null,"image":null,"headline":"Home","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link href="/assets/css/style.css?v=e363aff3e01095b44c814434ca7924f709f5ac6b" rel="stylesheet">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
        <h1><a href="http://localhost:4000/">SanFran6Homes</a></h1>
      

      <div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.8.3/jquery.csv.js"></script>
        <script>
        var data;
        $.ajax({
            type: "GET",
            url: "listings.csv",
            dataType: "text",
            success: function(response)
            {
                data = $.csv.toArrays(response);
                //generateHtmlTable(data);
            }
        });

//        test function
        function generateHtmlTable(data) {
            var html = '<table  class="table table-condensed table-hover table-striped">';

            if(typeof(data[0]) === 'undefined') {
                return null;
            } else {
                var counter = 0;
                $.each(data, function( index, row ) {
                    //bind header
                    if(index == 0) {
                        html += '<thead>';
                        html += '<tr>';
                        $.each(row, function( index, colData ) {
                            html += '<th>';
                            html += colData;
                            html += '</th>';
                        });
                        html += '</tr>';
                        html += '</thead>';
                        html += '<tbody>';
                    } else {
                        html += '<tr>';
                        $.each(row, function( index, colData ) {
                            html += '<td>';
                            html += colData;
                            html += '</td>';
                        });
                        html += '</tr>';
                    }
                    if (counter > 50){
                        return false;
                    } else {
                        counter++;
                    }
                });
                html += '</tbody>';
                html += '</table>';
                alert(html);
                $('#csv-display').append(html);
            }
        }
        </script>
    <h1>Hi there, welcome to 6Homes!</h1>
    <ul>
        <li>This is the site.</li>
    </ul>
    <div>
        <!--display first graph: price per person map-->
        <!--<a href="https://plot.ly/~nlparis/6/?share_key=FZPFSbz3bCwvNwxNItdMlm" target="_blank" title="Plot 6" style="display: block; text-align: center;"><img src="https://plot.ly/~nlparis/6.png?share_key=FZPFSbz3bCwvNwxNItdMlm" alt="Plot 6" style="max-width: 100%;width: 600px;"  width="600" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>-->
        <!--<script data-plotly="nlparis:6" sharekey-plotly="FZPFSbz3bCwvNwxNItdMlm" src="https://plot.ly/embed.js" async></script>-->
    </div>
    <div id="csv-display"></div>
    <p> Price Estimation:</p>
    Latitude: <input type="text" id="latitude">
    Longitude: <input type="text" id="longitude">
    <input type="button" value="Estimate Weekly Earnings at this location" onClick="priceEstimation()">
    <div class="loading" style="display:none">loading...</div>

    <script>
        function priceEstimation(){
            $(".loading").show();
            var latitude = $("#latitude").val();
            var longitude = $("#longitude").val();
            console.log("check lon and lat " + latitude + " " + longitude);
            //.01 is about 0.7 miles.
            //I think we should use 0.025 square block for estimations here.
            var listing_data;
            $.ajax({
                type: "GET",
                url: "listings.csv",
                dataType: "text",
                success: function (response) {
                    console.log("success");
                    console.log(data[1]);
                    data = $.csv.toArrays(response);
                    //shortenData(listing_data);
                    var length = data.length;
                    //var latitude = $("#latitude").val();
                    //var longitude = $("#longitude").val();
                    console.log(latitude + "latitude");
                    console.log(longitude + "lade");
                    var area_array = [0, 12];

                    var proximity = 0.025;

                    for (var i = 1; i < length; ++i){
                        //0.0025 is my decided range for proximity
                        if (Math.abs(Math.abs(data[i][48]) - Math.abs(latitude)) <= proximity) { //latitude
                            console.log("latitude fits");
                            if (Math.abs(Math.abs(data[i][49]) - Math.abs(longitude)) <= proximity){//longitude
                                console.log("longitude fits");
                                area_array.push(data[i]);
                            }
                        }
                    }

                    console.log(area_array);

                    $(".loading").hide();
                }
            });
        }

        function shortenData(data){//not used
            console.log(data);
            console.log(data.length);
            var latitude = $("#latitude").val();
            var longitude = $("#longitude").val();
            var area_array;
            for (var i = 1; i < data.length; ++i){
                //0.0025 is my decided range for proximity
                if (Math.abs(Math.abs(data[i][48]) - Math.abs(latitude)) <= 0.0025) { //latitude
                    console.log("latitude fits");
                    if (Math.abs(Math.abs(data[i][49]) - Math.abs(longitude)) <= 0.0025){//longitude
                        console.log("longitude fits");
                        area_array.push(data[i]);
                    }
                }
            }

            console.log(area_array);

            $(".loading").hide();
        }

        function findNear(data, length, latitude, longitude, proximity){
            var area_array;
            console.log(data[2][48]);
            console.log(latitude);
            console.log(proximity);
            for (var i = 1; i < length; ++i){
                //0.0025 is my decided range for proximity
                if (Math.abs(Math.abs(data[i][48]) - Math.abs(latitude)) <= proximity) { //latitude
                    console.log("latitude fits");
                    if (Math.abs(Math.abs(data[i][49]) - Math.abs(longitude)) <= proximity){//longitude
                        console.log("longitude fits");
                        area_array.push(data[i]);
                    }
                }
            }
            return area_array;
        }
    </script>
</div>

      
    </div>
    <script src="/assets/javascript/anchor-js/anchor.min.js"></script>
    <script>anchors.add();</script>
  </body>
</html>
